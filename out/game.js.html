<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: game.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: game.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileOverview File that hold the main game loop, resize and reload scripts
 * @name game.js
 */
var canvas = document.getElementById("connect4Canvas");
var ctx = canvas.getContext("2d");

//resize 
window.addEventListener('resize', function(){ resize();})

var screenWidth = 640;
var screenHeight = 480;

var ratio = screenHeight/screenWidth;
var ratioHeight =1;
var ratioWidht = 1;

resize();

var currentWidth = screenWidth;
var currentHeight = screenHeight;

canvas.width = screenWidth;
canvas.height = screenHeight;

//Init objects
var Grid = new grid();
var Counter = new counters();
var Arrow = new arrow();
var Menu = new menu();
var Check = new checkScript();
var WinS = new winScreen();
var LoseS = new loseScreen();

//Init objects
var Grid = new grid();
var Counter = new counters();
var Arrow = new arrow();
var Menu = new menu();
var Check = new checkScript();
var WinS = new winScreen();
var LoseS = new loseScreen();
var LeaderBoard = new leaderBoard();

//determines what state the user is in
var gamestate="menu";

update();

/** The update function controls the main game loop */
function update(){
    
    //every frame clear the whole canvas
    ctx.clearRect(0,0, canvas.width, canvas.height);
    if (gamestate=="menu"){
         Menu.drawMenu();
    }
    if(gamestate == "single"){
        Grid.drawGrid();
        Grid.drawCountersToGrid();
        Arrow.drawArrow();
        Arrow.placeCounter();
    }
    if(gamestate == "winner"){
      WinS.drawImg();
    }
    if(gamestate == "loser"){
      LoseS.drawImg();
    }
    if(gamestate == "winnerPlayer1"){
        WinS.drawImgWin1();
        //Player 1 win screen
    }
    if (gamestate == "winnerPlayer2"){
        WinS.drawImgWin2();
        //Player 2 win screen
    }
    
    if(gamestate == "leaderBoard"){
        leaderBoard.drawImgBoard();
        //LeaderBoard screen
    }
    
    if(gamestate == "quit"){
      //QUIT code
    }
    //Calls the update function again
    requestAnimationFrame(update);
}

/** The reset function calls reset methods so the grid and arrow position back to default **/
function reset(){
    Grid.clearArray();
    Arrow.resetArrow();
}

/** The resize function is called upon window resize, deals with changing window size **/
function resize(){
    ratio =  screenHeight / screenWidth;
    
    currentWidth = window.innerHeight;
    currentHeight = ratio * currentWidth;
    
    ratioHeight = currentHeight/screenHeight;
    ratioWidht = currentWidth/screenWidth;
    
    canvas.style.width = currentWidth + 'px';
    canvas.style.height = currentHeight + 'px';
    
    window.setTimeout(function() {window.scrollTo(0,1);}, 1);

}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="grid.html">grid</a></li></ul><h3>Global</h3><ul><li><a href="global.html#reset">reset</a></li><li><a href="global.html#resize">resize</a></li><li><a href="global.html#update">update</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Fri Nov 27 2015 22:44:01 GMT+0000 (GMT Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
